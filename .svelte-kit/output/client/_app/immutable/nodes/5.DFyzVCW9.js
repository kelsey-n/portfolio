import{c as ce}from"../chunks/BqGHGP1s.js";import{t as g,a as u}from"../chunks/DDc05N5e.js";import"../chunks/Be66NCO-.js";import{p as ee,a as te,s as S,w as L,C as me,D as ve,c as A,r as x,t as de}from"../chunks/B5OLWQwI.js";import{i as fe}from"../chunks/DrE1IaP1.js";import{p as pe,a as ue}from"../chunks/CQSJUSQe.js";import{i as M}from"../chunks/DUz0Gi5H.js";import{e as O,i as W,s as $}from"../chunks/DivZuvEe.js";import{o as ge}from"../chunks/BpRQwZAL.js";import{D as he}from"../chunks/Dmu43BtU.js";async function _e({fetch:T}){const d=await T("/data/dataviz-projects.csv");if(!d.ok)throw new Error("Failed to load CSV data");const I=await d.text();return{projects:ce(I).map(o=>({highlighted:o.highlighted,year:o.year,imageFolder:o.imageFolder,mainImageAlt:o.mainImageAlt,content:{title:o.content_title,description:o.content_description,tags:o.content_tags.split(";").map(m=>m.trim()),images:o.content_images.split(";").map(m=>m.trim()),image_alts:o.content_imagesAlts.split(";").map(m=>m.trim()),image_descriptions:o.content_imagesDescriptions.split(";").map(m=>m.trim()),honors:o.content_honors.split(";").map(m=>m.trim()),featured:o.content_featured.split(";").map(m=>m.trim())}}))}}const Xe=Object.freeze(Object.defineProperty({__proto__:null,load:_e},Symbol.toStringTag,{value:"Module"}));var we=g('<div class="minimap-label work svelte-1n2zwfq"><span class="svelte-1n2zwfq">HIGHLIGHTED long label WORK</span></div>'),ze=g('<div class="minimap-label work svelte-1n2zwfq"><span class="svelte-1n2zwfq">ALL WORK</span></div>'),Se=g('<div class="minimap-label work svelte-1n2zwfq"><span class="svelte-1n2zwfq">TEST</span></div>'),qe=g('<div class="minimap-label work svelte-1n2zwfq"><span class="svelte-1n2zwfq">another test</span></div>'),ye=g('<div class="minimap-label-space svelte-1n2zwfq"><!> <!> <!> <!></div>'),xe=g('<div class="item svelte-1n2zwfq"><img class="svelte-1n2zwfq"></div>'),be=g('<div class="minimap-label year svelte-1n2zwfq"><span class="svelte-1n2zwfq">test</span></div>'),Me=g('<div class="minimap-label year svelte-1n2zwfq"><span class="svelte-1n2zwfq">2024</span></div>'),Ie=g('<div class="minimap-label year svelte-1n2zwfq"><span class="svelte-1n2zwfq">2023</span></div>'),Ee=g('<div class="minimap-label year svelte-1n2zwfq"><span class="svelte-1n2zwfq">2022</span></div>'),Ce=g('<div class="minimap-label-space year svelte-1n2zwfq"><!> <!> <!> <!></div>'),ke=g('<div class="minimap-container svelte-1n2zwfq"><div class="img-preview svelte-1n2zwfq"><!></div> <div class="minimap svelte-1n2zwfq"><div class="indicator svelte-1n2zwfq"></div> <div class="minimap-labels svelte-1n2zwfq"></div> <div class="items svelte-1n2zwfq"></div> <div class="minimap-labels svelte-1n2zwfq"></div></div></div>');function Ae(T,d){ee(d,!0);let I=me(0);const B=9999999;ge(()=>{const q=document.querySelector(".minimap-container"),y=document.querySelector(".items"),c=document.querySelectorAll(".minimap-label.work"),f=document.querySelectorAll(".minimap-label.year"),b=document.querySelectorAll(".minimap-label.work span"),C=document.querySelectorAll(".minimap-label.year span");let i={work:0,year:0};const k=document.querySelector(".indicator"),_=document.querySelectorAll(".item");document.querySelector(".img-preview-content");const w=document.querySelectorAll(".item img");let z=window.innerWidth<=B,s={itemSize:0,containerSize:0,indicatorSize:0},t=0,a=0,p=0,Y=!1;const H=.3,G=1,K=1,P=1.1;function ae(e,r,v){return e+(r-e)*v}function J(){return z=window.innerWidth<=B,z?s={itemSize:_[0].getBoundingClientRect().width,containerSize:y.scrollWidth,indicatorSize:k.getBoundingClientRect().width}:s={itemSize:_[0].getBoundingClientRect().height,containerSize:y.getBoundingClientRect().height,indicatorSize:k.getBoundingClientRect().height},s}s=J(),t=s.containerSize-s.indicatorSize;function ne(){w.forEach(l=>{l.style.opacity=H,l.style.scale=K});const e=-a,r=e+s.indicatorSize;let v=0,n=0;return _.forEach((l,E)=>{const h=E*s.itemSize,re=h+s.itemSize,oe=Math.max(e,h),le=Math.min(r,re),Z=Math.max(0,le-oe);Z>v&&(v=Z,n=E)}),w[n].style.opacity=G,w[n].style.scale=P,n}function N(e){L(I)!==e&&ve(I,pe(e))}function j(e,r,v){return e[v].left-e[r].right}function Q(e,r,v,n){const l=[...v].map(E=>E.getBoundingClientRect());(i[n]<l.length-1||i[n]>0)&&r.forEach((E,h)=>{h>i[n]?E.style.transform=`translateX(${Math.max(Math.min(a,0),-(e[h].left-e[0].left))}px)`:h<i[n]&&(Math.max(Math.min(a+j(e,h,h+1),0),-(e[0].left-l[h].left)),E.style.transform=`translateX(${a+j(e,h,h+1)}px)`)}),i[n]<l.length-1&&l[i[n]+1].left<=e[0].left&&(console.log("inc ac ind"),i[n]+=1),i[n]>0&&l[i[n]-1].left>=e[0].left&&(console.log("dec ac ind"),i[n]-=1),i[n]<l.length-1&&l[i[n]+1].left<=l[i[n]].right&&(r[i[n]].style.transform=`translateX(${a+j(e,i[n],i[n]+1)}px)`),i[n]>0&&l[i[n]-1].right>l[i[n]].left&&(r[i[n]].style.transform=`translateX(${a}px)`)}const ie=[...b].map(e=>e.getBoundingClientRect()),se=[...C].map(e=>e.getBoundingClientRect());function U(){if(a=ae(a,p,Y?.05:.075),Math.abs(a-p)>.01){const r=z?`translateX(${a}px)`:`translateY(${a}px)`;y.style.transform=r,Q(ie,c,b,"work"),Q(se,f,C,"year");const v=ne();N(v)}else Y=!1;requestAnimationFrame(U)}q.addEventListener("wheel",e=>{e.preventDefault(),Y=!1;let r;r=e.deltaY;const v=Math.min(Math.max(r*.5,-20),20);p=Math.min(Math.max(p-v,-t),0)},{passive:!1}),q.addEventListener("touchstart",e=>{z&&e.touches[0].clientY}),q.addEventListener("touchmove",e=>{if(z){const n=e.touches[0].clientY,l=Math.min(Math.max(n*.5,-20),20);p=Math.min(Math.max(p-l,-t),0),e.preventDefault()}},{passive:!1}),_.forEach((e,r)=>{e.addEventListener("click",()=>{Y=!0,p=-r*s.itemSize+(s.indicatorSize-s.itemSize)/2,p=Math.max(Math.min(p,0),-t)})}),window.addEventListener("resize",()=>{s=J();const e=s.containerSize=s.indicatorSize;p=Math.min(Math.max(p,-e),0),a=p;const r=z?`translateX(${a}px)`:`translateY(${a}px)`;y.style.transform=r}),w.forEach(e=>{e.style.opacity=H,e.style.scale=K}),w[0].style.opacity=G,w[0].style.scale=P,N(0),U()});var R=ke(),o=A(R),m=A(o);he(m,{get data(){return d.data[L(I)].content},get imageFolder(){return d.data[L(I)].imageFolder}}),x(o);var X=S(o,2),F=S(A(X),2);O(F,21,()=>d.data,W,(q,y,c)=>{var f=ye(),b=A(f);{var C=t=>{var a=we();u(t,a)};M(b,t=>{c===0&&t(C)})}var i=S(b,2);{var k=t=>{var a=ze();u(t,a)};M(i,t=>{c===3&&t(k)})}var _=S(i,2);{var w=t=>{var a=Se();u(t,a)};M(_,t=>{c===4&&t(w)})}var z=S(_,2);{var s=t=>{var a=qe();u(t,a)};M(z,t=>{c===5&&t(s)})}x(f),u(q,f)}),x(F);var D=S(F,2);O(D,21,()=>d.data,W,(q,y)=>{var c=xe(),f=A(c);x(c),de(()=>{$(f,"src",`/images/data-viz-page/${L(y).imageFolder??""}/carouselImage.png`),$(f,"alt",L(y).mainImageAlt)}),u(q,c)}),x(D);var V=S(D,2);O(V,21,()=>d.data,W,(q,y,c)=>{var f=Ce(),b=A(f);{var C=t=>{var a=be();u(t,a)};M(b,t=>{c===0&&t(C)})}var i=S(b,2);{var k=t=>{var a=Me();u(t,a)};M(i,t=>{c===3&&t(k)})}var _=S(i,2);{var w=t=>{var a=Ie();u(t,a)};M(_,t=>{c===5&&t(w)})}var z=S(_,2);{var s=t=>{var a=Ee();u(t,a)};M(z,t=>{c===6&&t(s)})}x(f),u(q,f)}),x(V),x(X),x(R),u(T,R),te()}function Ve(T,d){ee(d,!1);let B=ue(d,"data",8)().projects;fe(),Ae(T,{data:B}),te()}export{Ve as component,Xe as universal};
